## 1. 核心数据摄入操作（最高优先级）

### 实时数据流处理
```
操作名称：实时CNV文件追踪与解析
关键功能：
- 安全地读取持续增长的CNV文件（只读模式，不锁定文件）
- 维护文件读取偏移量，只解析新增数据
- 将原始数据行写入realtime_buffer表
- 解析并验证数据完整性后写入sensor_data表
- 自动检测并创建新的Cast记录
持续价值：这是整个系统的数据基础，所有可视化和分析功能都依赖于此
```

### 文件元数据管理
```
操作名称：文件注册与哈希验证
关键功能：
- 计算并存储文件SHA256哈希值
- 解析SeaBird header信息存入header_info字段
- 自动关联文件到对应的cruise
- 跟踪文件处理状态
持续价值：确保数据完整性和可追溯性，符合客户"不篡改原始数据"的核心要求
```

## 2. Cast分割与管理操作（第二优先级）

### 自动Cast检测
```
操作名称：基于压力变化的Cast自动分割
关键功能：
- 实时监测pressure/depth变化趋势
- 使用滞后算法识别上升/下降转换点
- 自动创建Cast记录并关联数据
- 计算Cast的统计信息（最大深度、持续时间、位置范围）
持续价值：Cast是数据组织的基本单元，所有后续分析都基于Cast进行
```

## 3. 数据质量控制操作

### 实时QC检查
```
操作名称：多级数据质量控制
关键功能：
- 范围检查（温度-5到40°C，深度-10到400m）
- 尖峰检测（异常值识别）
- 梯度检查（变化率异常）
- 自动标记可疑数据但保留原始值
- 记录QC结果到qc_logs表
持续价值：确保数据科学可信度，这是海洋科学研究的基础要求
```

## 4. 实时数据查询与聚合操作

### 时间窗口数据获取
```
操作名称：滑动时间窗口数据查询
关键功能：
- 获取最近N分钟的实时数据
- 支持多变量并行查询
- 自动数据降采样（高频数据抽稀）
- 利用TimescaleDB的时序优化
持续价值：为实时可视化提供高效数据源，避免前端性能瓶颈
```

### 深度剖面数据提取
```
操作名称：垂直剖面数据构建
关键功能：
- 按深度分层提取数据
- 插值处理缺失深度层
- 支持多个Cast的剖面对比
- 生成等深线数据网格
持续价值：这是生成contour plot的基础，是客户核心需求
```

## 5. GPS轨迹管理操作

### 实时位置追踪
```
操作名称：设备位置实时更新与查询
关键功能：
- 分别追踪TRIAXUS和船只位置
- 计算设备间距离和相对位置
- 维护历史轨迹with时间戳
- 支持轨迹回放功能
持续价值：提供空间维度的数据关联，对数据解释至关重要
```

## 6. 数据导出与归档操作

### NetCDF格式导出
```
操作名称：标准格式数据导出
关键功能：
- 按Cast导出为NetCDF格式
- 包含完整元数据和QC标记
- 遵循CF conventions标准
- 支持批量导出和增量导出
持续价值：确保数据可以被其他科研工具使用，满足数据共享需求
```

## 7. 系统监控与日志操作

### 操作审计日志
```
操作名称：全流程操作记录
关键功能：
- 记录所有数据处理步骤
- 追踪用户操作和系统事件
- 性能监控（处理延迟、数据积压）
- 错误和异常记录
持续价值：提供问题诊断能力，确保系统可靠性
```

## 8. 缓存与性能优化操作

### 物化视图刷新
```
操作名称：统计数据预计算
关键功能：
- 定期更新latest_sensor_readings视图
- 维护Cast统计信息缓存
- 预计算常用查询结果
- 自动清理过期缓冲数据 s
持续价值：确保系统在数据量增长时仍保持响应性
```
